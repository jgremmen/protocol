plugins {
  id 'java-library'
  id 'idea'
  id 'maven-publish'
  id 'nebula.optional-base' version '5.0.3'
  id 'jacoco'
  id 'signing'
  id "org.sonarqube" version "3.0"
}


description 'Protocol Library'
group 'de.sayayi.lib'
version '0.7.0'


ext {
  jetbrainsAnnotationsVersion = "13.0"
  junitVersion = "4.13.1"
  lombokVersion = "1.18.16"
  messageFormatVersion = "0.4.2"
  mockitoVersion = "3.6.28"
  unbescapeVersion = "1.1.6.RELEASE"
}


apply from: file('gradle/javadoc.gradle')
apply from: file('gradle/quality.gradle')
apply from: file('gradle/publishing.gradle')


repositories {
  jcenter()
}


dependencies {
  // java
  annotationProcessor "org.projectlombok:lombok:${lombokVersion}"

  implementation "org.unbescape:unbescape:${unbescapeVersion}", optional
  implementation "de.sayayi.lib:message-format-nodep:${messageFormatVersion}", optional

  compileOnly "org.projectlombok:lombok:${lombokVersion}"
  compileOnly "org.jetbrains:annotations:${jetbrainsAnnotationsVersion}"

  // test
  testAnnotationProcessor "org.projectlombok:lombok:${lombokVersion}"

  testImplementation "junit:junit:${junitVersion}"
  testImplementation "org.mockito:mockito-core:${mockitoVersion}"

  testCompileOnly "org.projectlombok:lombok:${lombokVersion}"
  testCompileOnly "org.jetbrains:annotations:${jetbrainsAnnotationsVersion}"
}


compileJava {
  sourceCompatibility = JavaVersion.VERSION_1_6
  targetCompatibility = JavaVersion.VERSION_1_6
}


compileTestJava {
  sourceCompatibility = JavaVersion.VERSION_1_8
  targetCompatibility = JavaVersion.VERSION_1_8
}
